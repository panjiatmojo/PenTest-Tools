package PenTest;

import java.util.ArrayList;

public class PenTest {

	public static void main(String[] args) {
		String urlString = null;

		if((args == null || args.length == 0))
		{
			urlString = "http://theatmojo.com";			
		}
		else
		{
			urlString = args[0];			
		}

		Integer	 i = 0;

		for(i = 0; i < 1; i++)
		{
			System.out.println("attempt " + i);
			
			/*	identify the host	*/
			String ipAddress = HostIdentifier.getIpAddress(urlString);
			File.writeTimestamp("output.log", "ipAddress: "+ ipAddress);	
			
			String ftpBanner = HostIdentifier.getFtpBanner(ipAddress);
			File.writeTimestamp("output.log", "ftpBanner: "+ ftpBanner);	
			
			
			
			String content = UrlFetch.getContent(urlString);

			ArrayList<String> output = ContentFinder.findUrl(content);
			for (int j = 0; j < output.size(); j++) {
				File.writeTimestamp("output.log", "url: "+output.get(j));
			}

			output = ContentFinder.findScript(content);
			System.out.println(output);
			for (int j = 0; j < output.size(); j++) {

				File.writeTimestamp("output.log", "script: "+output.get(j));

				String scriptContent = UrlFetch.getContent(output.get(j));

				ArrayList<String> scriptComment = ContentFinder.findComment(scriptContent);


				for(int k = 0; k < scriptComment.size(); k++)
				{
					File.writeTimestamp("output.log", "scriptComment: "+scriptComment.get(k));
				}

			}
			output = ContentFinder.findStyle(content);
			System.out.println(output);
			for (int j = 0; j < output.size(); j++) {
				File.writeTimestamp("output.log", "style: "+output.get(j));
			}
			output = ContentFinder.findImage(content);
			System.out.println(output);
			for (int j = 0; j < output.size(); j++) {
				File.writeTimestamp("output.log", "image: "+output.get(j));
			}
			output = ContentFinder.findComment(content);
			System.out.println(output);
			for (int j = 0; j < output.size(); j++) {
				File.writeTimestamp("output.log", "comment: "+output.get(j));
			}
			output = ContentFinder.findHtmlComment(content);
			System.out.println(output);
			for (int j = 0; j < output.size(); j++) {
				File.writeTimestamp("output.log", "htmlComment: "+output.get(j));
			}
		}

	}

}
